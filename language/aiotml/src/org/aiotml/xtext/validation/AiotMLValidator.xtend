/*
 * generated by Xtext 2.10.0
 */
package org.aiotml.xtext.validation

import org.eclipse.xtext.validation.Check
import org.aiotml.xtext.helpers.IncludeCycle
import org.aiotml.xtext.helpers.ThingHelper
import org.aiotml.xtext.aiotML.Thing
import org.aiotml.xtext.aiotML.AiotMLPackage
import org.aiotml.xtext.constraints.AiotMLHelpers

/**
 * This class contains custom validation rules. 
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class AiotMLValidator extends AbstractAiotMLValidator {

	@Check
	def checkNoCyclesInThingIncludes(Thing thing) {
		try {
			ThingHelper.allIncludedThingsWithCheck(thing)
			AiotMLHelpers.allThingFragmentsWithCheck(thing)
		} catch (IncludeCycle e) {
			error(e.message, thing, AiotMLPackage.eINSTANCE.thing_Includes);
			return;
		}
	}

}
